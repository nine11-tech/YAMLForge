---
- name: Deploy and configure a simulated Web Server
  hosts: localhost
  become: yes

  vars:
    web_port: 8080

  tasks:
    - name: Install Apache web server
      apt:
        name: apache2
        state: present
        update_cache: yes

    - name: Change Apache listen port
      lineinfile:
        path: /etc/apache2/ports.conf
        regexp: '^Listen'
        line: "Listen {{ web_port }}"
      notify: restart apache

    - name: Deploy sample web page
      copy:
        content: |
          <html>
          <body style="background-color:#111; color:#00ff88; text-align:center; font-family:monospace;">
          <h1>ðŸš€ YAMLForge Web Server (DMZ Zone)</h1>
          <p>Automated setup using Ansible + YAML</p>
          </body>
          </html>
        dest: /var/www/html/index.html
        mode: '0644'

  handlers:
    - name: restart apache
      service:
        name: apache2
        state: restarted
